## **ğŸš€ ä»»åŠ¡æç¤ºä¸æµ‹è¯•ä»£ç è°ƒæ•´æŒ‡å—**

---

### **1\. è¾“å…¥éªŒè¯å¢å¼º**

| æ–¹é¢ | ç®€è¦æç¤º | å¿…é¡»ä¿®æ”¹æˆ–æ–°å¢çš„æµ‹è¯•ä»£ç  |
| :---- | :---- | :---- |
| **é•¿åº¦é™åˆ¶** (å¦‚ 200 å­—ç¬¦) | åœ¨ library.py çš„ add\_book ä¸­æ·»åŠ  len() æ£€æŸ¥ã€‚ | **test\_edge\_cases.py (ä¿®æ”¹ & æ–°å¢)**: 1\. **ä¿®æ”¹** test\_long\_inputï¼šå°†è¶…é•¿è¾“å…¥ï¼ˆå¦‚ 500 ä¸ªå­—ç¬¦ï¼‰æ·»åŠ åˆ°æµ‹è¯•ä¸­ï¼Œæ–­è¨€ lib.add\_book è¿”å› Falseã€‚ 2\. **æ–°å¢**ä¸€ä¸ªæµ‹è¯•ï¼Œæ–­è¨€é•¿åº¦**åˆšå¥½åœ¨**é™åˆ¶å†…æ—¶è¿”å› Trueã€‚ |
| **å¤šå•è¯ä½œè€…å** | **ä¿®æ”¹ main.py** ä»¥æ­£ç¡®è§£æå¤šå•è¯ä½œè€…åï¼ˆä¾‹å¦‚ä½¿ç”¨å¼•å·ï¼‰ï¼Œå¹¶ä¿®æ”¹ library.py å†…éƒ¨é€»è¾‘ã€‚ | **test\_edge\_cases.py (æ–°å¢)**: 1\. æ–°å¢ test\_add\_book\_multi\_word\_authorï¼šæµ‹è¯• add\_book ä¼ å…¥å¦‚ "Jane Austen" æ˜¯å¦æ­£ç¡®ä¿å­˜ã€‚ **test\_system.py (æ–°å¢)**: 2\. æ–°å¢ test\_system\_add\_multi\_word\_authorï¼šæ¨¡æ‹Ÿç”¨æˆ·è¾“å…¥å¸¦å¼•å·çš„å‘½ä»¤ (add "Pride and Prejudice" "Jane Austen")ï¼Œå¹¶ç”¨ search éªŒè¯ä½œè€…åæ˜¯å¦å®Œæ•´ã€‚ |

### 

### 

### 

### 

### **2\. åŠŸèƒ½æ‰©å±•ï¼šä¹¦ç±åˆ†ç±»ä¸ç”¨æˆ·ç³»ç»Ÿ**

| æ–¹é¢ | ç®€è¦æç¤º | å¿…é¡»ä¿®æ”¹æˆ–æ–°å¢çš„æµ‹è¯•ä»£ç  |
| :---- | :---- | :---- |
| **æ–°å¢ä¹¦ç±åˆ†ç±»** | ä¿®æ”¹ add\_book ç­¾åï¼Œæ–°å¢ filter\_by\_category æ–¹æ³•ã€‚ | **test\_unit.py (ä¿®æ”¹ & æ–°å¢)**: 1\. **ä¿®æ”¹** test\_add\_book\_successï¼šæ£€æŸ¥æ–°ä¹¦å­—å…¸ä¸­æ˜¯å¦æœ‰æ­£ç¡®çš„ category é”®å€¼ã€‚ 2\. **æ–°å¢** test\_filter\_by\_category\_success å’Œ test\_filter\_by\_category\_not\_foundï¼ŒéªŒè¯æ–°æ–¹æ³•ã€‚ **test\_system.py (æ–°å¢)**: 3\. æ–°å¢æµ‹è¯•ï¼Œæ¨¡æ‹Ÿç”¨æˆ·è¾“å…¥ add Title Author Categoryï¼Œå¹¶æ¨¡æ‹Ÿæ–°çš„ filter å‘½ä»¤ï¼ˆå‡è®¾ main.py æ‰©å±•äº†æ­¤å‘½ä»¤ï¼‰ï¼ŒéªŒè¯è¾“å‡ºåˆ—è¡¨ã€‚ |
| **æ·»åŠ ç”¨æˆ·ç³»ç»Ÿ** | Library ä¸­æ–°å¢ self.users å­—å…¸ï¼Œä¿®æ”¹ borrow\_book å’Œ return\_book æ¥å— username å‚æ•°ã€‚ | **test\_unit.py (æ–°å¢)**: 1\. æ–°å¢ test\_borrow\_book\_updates\_user\_historyï¼šæ–­è¨€ lib.users å­—å…¸ä¸­è®°å½•äº†å€Ÿé˜…å†å²ã€‚ 2\. æ–°å¢ test\_borrow\_book\_unknown\_userï¼šæµ‹è¯•å€Ÿé˜…æ—¶ç”¨æˆ·ä¸å­˜åœ¨æ—¶çš„å¤„ç†ã€‚ **test\_component.py (æ–°å¢)**: 3\. æ–°å¢ test\_two\_users\_borrow\_same\_bookï¼šæµ‹è¯•å¦‚æœåŒåä¹¦å…è®¸å­˜åœ¨ï¼Œä¸¤ä½ç”¨æˆ·å€Ÿèµ°ä¸åŒå‰¯æœ¬æ—¶çš„äº¤äº’ã€‚ |

### 

### 

### 

### **3\. ç³»ç»Ÿå¥å£®æ€§ï¼šæ—¥å¿—ä¸ç¡®è®¤æœºåˆ¶**

| æ–¹é¢ | ç®€è¦æç¤º | å¿…é¡»ä¿®æ”¹æˆ–æ–°å¢çš„æµ‹è¯•ä»£ç  |
| :---- | :---- | :---- |
| **æ—¥å¿—è®°å½•ç³»ç»Ÿ** | ä½¿ç”¨ Python logging æ¨¡å—ã€‚åœ¨ library.py çš„æ–¹æ³•ä¸­æ·»åŠ  logging.info å’Œ logging.error è°ƒç”¨ã€‚ | **test\_unit.py (æ–°å¢)**: 1\. æ–°å¢ test\_add\_book\_logs\_info (ä½¿ç”¨ caplog fixture)ï¼šæ–­è¨€æ·»åŠ æˆåŠŸæ—¶ï¼Œæ—¥å¿—ä¸­èƒ½æ•è·åˆ° INFO çº§åˆ«çš„è®°å½•ã€‚ 2\. æ–°å¢ test\_remove\_book\_not\_found\_logs\_error (ä½¿ç”¨ caplog)ï¼šæ–­è¨€åˆ é™¤å¤±è´¥æ—¶ï¼Œèƒ½æ•è·åˆ° ERROR çº§åˆ«çš„è®°å½•ã€‚ |
| **å‘½ä»¤ç¡®è®¤æœºåˆ¶** | åœ¨ library.py çš„ remove\_book å†…éƒ¨æ·»åŠ  input() ç¡®è®¤ã€‚ | **test\_system.py (æ–°å¢)**: 1\. æ–°å¢ test\_system\_remove\_with\_confirmï¼šä½¿ç”¨ patch("builtins.input", side\_effect=\[..., "Y", ...\]) æ¨¡æ‹Ÿç¡®è®¤ Yï¼Œæ–­è¨€åˆ é™¤æˆåŠŸã€‚ 2\. æ–°å¢ test\_system\_remove\_with\_rejectï¼šæ¨¡æ‹Ÿæ‹’ç» Nï¼Œæ–­è¨€ä¹¦ç±ä»èƒ½è¢« list æˆ– search æ‰¾åˆ°ã€‚ |

### 

### 

### 

### 

### 

### 

### 

### **4\. æ•°æ®æŒä¹…åŒ–ï¼šSQLite æ•°æ®åº“**

| æ–¹é¢ | ç®€è¦æç¤º | å¿…é¡»ä¿®æ”¹æˆ–æ–°å¢çš„æµ‹è¯•ä»£ç  |
| :---- | :---- | :---- |
| **SQLite å­˜å‚¨** | ä½¿ç”¨ sqlite3ã€‚æ‰€æœ‰ library.py æ–¹æ³•æ”¹ä¸ºæ‰§è¡Œ SQL æŸ¥è¯¢ã€‚ | **conftest.py (æ–°å¢)**: 1\. å®šä¹‰ä¸€ä¸ª db\_lib fixtureï¼Œç”¨äºåˆ›å»ºå’Œæ¸…ç†ä¸´æ—¶æ•°æ®åº“æ–‡ä»¶ã€‚ **æ‰€æœ‰ç°æœ‰æµ‹è¯• (é‡æ„)**: 2\. å°†æ‰€æœ‰æµ‹è¯•æ–‡ä»¶ä¸­çš„ lib, empty\_lib, lib\_with\_one\_book fixtures **æ›¿æ¢**ä¸º db\_lib æˆ–åŸºäº db\_lib çš„æ–°å¤¹å…·ã€‚ **test\_unit.py (æ–°å¢)**: 3\. æ–°å¢ test\_data\_persistenceï¼šéªŒè¯æ•°æ®åœ¨ç¨‹åºé€€å‡ºï¼ˆæ¨¡æ‹Ÿå®ä¾‹é”€æ¯ï¼‰åï¼Œé€šè¿‡é‡æ–°åŠ è½½æ•°æ®åº“æ–‡ä»¶**ä»ç„¶å­˜åœ¨**ã€‚ |
| **æ•°æ®å¯¼å…¥å¯¼å‡º** | å¯¼å…¥ csv æˆ– jsonã€‚å®ç° export\_data å’Œ import\_dataã€‚ | **test\_unit.py (æ–°å¢)**: 1\. æ–°å¢ test\_export\_json\_contentï¼šä½¿ç”¨ tmp\_path fixture åˆ›å»ºä¸´æ—¶æ–‡ä»¶ï¼ŒéªŒè¯å¯¼å‡ºå†…å®¹æ˜¯å¦æ­£ç¡®ã€‚ 2\. æ–°å¢ test\_import\_json\_integrityï¼šéªŒè¯å¯¼å…¥åï¼Œæ–°ä¹¦çš„å¯ç”¨æ€§ (available çŠ¶æ€) æ˜¯å¦æ­£ç¡®ã€‚ **test\_system.py (æ–°å¢)**: 3\. æ–°å¢ test\_system\_export\_and\_reimportï¼šæ¨¡æ‹Ÿç”¨æˆ·æ‰§è¡Œ export å‘½ä»¤ï¼Œç„¶åæ¨¡æ‹Ÿæ‰§è¡Œ import å‘½ä»¤ï¼ˆéœ€ä¿®æ”¹ main.py æ·»åŠ å‘½ä»¤ï¼‰ï¼ŒéªŒè¯ä¹¦åº“çŠ¶æ€ã€‚ |

### 

### 

### **5\.  æ€§èƒ½ä¼˜åŒ–ï¼šäºŒåˆ†æŸ¥æ‰¾ä¸æ‰¹é‡æ“ä½œ**

| æ–¹é¢ | ç®€è¦æç¤º | å¿…é¡»ä¿®æ”¹æˆ–æ–°å¢çš„æµ‹è¯•ä»£ç  |
| :---- | :---- | :---- |
| **äºŒåˆ†æŸ¥æ‰¾ä¼˜åŒ–** | ä¿®æ”¹ library.py çš„æ•°æ®ç»“æ„å’Œ add\_book é€»è¾‘ï¼Œä½¿ç”¨ bisect ç»´æŠ¤æ’åºã€‚ | **test\_edge\_cases.py (ä¿®æ”¹)**: 1\. **ä¿®æ”¹** test\_add\_book\_duplicate\_with\_different\_caseï¼šå¦‚æœä¼˜åŒ–æ–¹æ¡ˆå…è®¸åŒåä¹¦ï¼ˆä»…æŒ‰æ ‡é¢˜æ’åºï¼‰ï¼Œæµ‹è¯•é€»è¾‘éœ€è¦è°ƒæ•´ã€‚ 2\. **æ–°å¢** test\_add\_book\_maintains\_orderï¼šæ·»åŠ  A, C, B ä¸‰æœ¬ä¹¦ï¼Œæ–­è¨€ lib.books åˆ—è¡¨çš„é¡ºåºæ˜¯ A, B, Cï¼Œä»¥éªŒè¯ bisect æ­£å¸¸å·¥ä½œã€‚ **test\_component.py (æ–°å¢)**: 3\. **æ€§èƒ½æµ‹è¯•ï¼š** ä½¿ç”¨ time æ¨¡å—æˆ– pytest-benchmark æ’ä»¶ï¼ˆå¦‚æœå…è®¸ï¼‰ï¼Œæ–°å¢æµ‹è¯•æ¥**æµ‹é‡**æ·»åŠ  10000 æœ¬ä¹¦æ‰€éœ€çš„æ—¶é—´ã€‚ |
| **æ·»åŠ æ‰¹é‡æ“ä½œåŠŸèƒ½** | åœ¨ library.py ä¸­å®ç° batch\_import(filepath)ï¼Œå¹¶åœ¨ main.py ä¸­æ·»åŠ  batch\_import å‘½ä»¤è§£æã€‚ | **test\_system.py (æ–°å¢)**: 1\. æ–°å¢ test\_system\_batch\_import\_successï¼šæ¨¡æ‹Ÿå¯¼å…¥ä¸€ä¸ªåŒ…å«å¤šæœ¬å¥½ä¹¦çš„æ–‡ä»¶ï¼Œæ–­è¨€ list ç»“æœä¸­**æ–°å¢äº†æ‰€æœ‰ä¹¦ç±**ã€‚ 2\. æ–°å¢ test\_system\_batch\_import\_with\_errorï¼šæ¨¡æ‹Ÿå¯¼å…¥åŒ…å«é”™è¯¯è¡Œçš„æ–‡ä»¶ï¼Œæ–­è¨€å¯¼å…¥çš„ä¹¦ç±æ•°é‡**æ­£ç¡®è·³è¿‡äº†é”™è¯¯è¡Œ**ã€‚ |

### 

### 

### **6\. ä»£ç é‡æ„ï¼šç±»æ‹†åˆ†ä¸å‘½ä»¤æ¨¡å¼**

| æ–¹é¢ | ç®€è¦æç¤º | å¿…é¡»ä¿®æ”¹æˆ–æ–°å¢çš„æµ‹è¯•ä»£ç  |
| :---- | :---- | :---- |
| **ç±»æ‹†åˆ†** | å°† Library æ‹†åˆ†ä¸º BookManager å’Œ LoanManagerã€‚ Library æˆä¸ºè¿™ä¸¤ä¸ªç®¡ç†å™¨çš„é—¨é¢ï¼ˆFacadeï¼‰ã€‚ | **test\_unit.py (æ–°å¢/é‡æ„)**: 1\. **æ–°å¢** test\_book\_manager\_crudï¼šå¯¹æ–°ç±» BookManager å•ç‹¬ç¼–å†™å•å…ƒæµ‹è¯•ã€‚ 2\. **æ–°å¢** test\_loan\_manager\_logicï¼šå¯¹æ–°ç±» LoanManager ç¼–å†™å•å…ƒæµ‹è¯•ã€‚3. **é‡æ–°è¿è¡Œ**æ‰€æœ‰**ç°æœ‰**çš„ test\_unit.py, test\_component.py, test\_system.py å’Œ test\_edge\_cases.py ä¸­çš„æµ‹è¯•ï¼Œç¡®ä¿å¯¹ Library ç±»çš„é‡æ„æ²¡æœ‰æ”¹å˜**å¤–éƒ¨è¡Œä¸º**ã€‚ |
| **å‘½ä»¤æ¨¡å¼** | å®šä¹‰ Command æŠ½è±¡ç±»ï¼Œå¹¶ä¸ºæ¯ä¸ªæ“ä½œåˆ›å»ºå…·ä½“å‘½ä»¤ç±»ã€‚ | **test\_unit.py (æ–°å¢)**: 1\. æ–°å¢ test\_add\_book\_command\_executionï¼šéªŒè¯ AddBookCommand().execute() èƒ½å¦æ­£ç¡®è°ƒç”¨åº•å±‚ç®¡ç†å™¨çš„æ–¹æ³•ã€‚ **test\_system.py (ä¿®æ”¹)**: 2\. **ä¿®æ”¹** main.py çš„æµ‹è¯•ï¼ˆå¦‚ test\_system\_add\_and\_listï¼‰ï¼Œç¡®ä¿æ–°çš„å‘½ä»¤æ¨¡å¼å®ç°èƒ½å¤Ÿ**æ­£ç¡®è§£æå’Œæ‰§è¡Œ**å‘½ä»¤ï¼Œå¹¶ä¸”ç”¨æˆ·ç•Œé¢å’Œè¾“å‡ºä¿æŒä¸å˜ã€‚ |

